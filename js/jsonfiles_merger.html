<!DOCTYPE html>
<html>
<head>
    <title>jsonfiles_merger</title>
</head>
<body>
<h1>check console to see results</h1>
</body>
</html>

<script>

 
    function collect() {
      var ret = {};
      var len = arguments.length;
      for (var i = 0; i < len; i++) {
        for (p in arguments[i]) {
          if (arguments[i].hasOwnProperty(p)) {
            ret[p] = arguments[i][p];
          }
        }
      }
      return ret;
    }
  

var cdata=[
    {
      "County_name": "Cuming County, NE",
      "Broadband_access": "89",
      "Construction_deaths_T1": 5.65360622,
      "Construction_deaths_T2": 5.69926999,
    },
    {
      "County_name": "Wahkiakum County, WA",
      "Broadband_access": "62.46",
      "Construction_deaths_T1": 5.86694958,
      "Construction_deaths_T2": 6.80947898,
    },
    {
      "County_name": "DeBaca County, NM",
      "Broadband_access": "81.24",
      "Construction_deaths_T1": 2.51090264,
      "Construction_deaths_T2": 1.1663067,
    }
]


var county={"type":"Topology","bbox":[-179.14733999999999,-14.552548999999999,179.77847,71.352561],
"transform":{"scale":[0.003589293992939929,0.0008590596905969058],
"translate":[-179.14733999999999,-14.552548999999999]},
"objects":{"counties":{"type":"GeometryCollection","geometries":[
{"type":"Polygon","arcs":[[0,1,2,3,4,5,6,7,8,9,10,11]],"id":"04015","properties":{"name":"Wahkiakum"}},
{"type":"Polygon","arcs":[[12,13,14,15,16,17,18]],"id":"22105","properties":{"name":"Tangipahoa"}},
{"type":"Polygon","arcs":[[12,13,14,15,16,17,18]],"id":"10210","properties":{"name":"Cuming"}}
]}}}


// var myDog = {
//   "name": "Coder",
//   "legs": 4,
//   "tails": 1,
//   "friends": ["freeCodeCamp Campers"]
// };
// console.log(JSON.parse(county))
// // Update the name value
// myDog.name = "Happy Coder";
// console.log(myDog)

// for(var i=0;i<cdata.length;i++){
//     var fullcountyname=cdata[i].County_name
//     var countynamefirst=fullcountyname.split(" ")[0]

//     for(var k=0;k<county.objects.counties.geometries.length;k++){
//         var cn=county.objects.counties.geometries[k].properties.name
//         if(countynamefirst==cn){
//             var cprops=county.objects.counties.geometries[k].properties

//             county.objects.counties.geometries[k].properties=collect(county.objects.counties.geometries[k].properties,cdata[i]);
//             // console.log(collect(cdata[i]))
//         // console.log(cdata[i]);
//         // console.log(county.objects.counties.geometries[k].properties)
        
//         }
//     }  
// }
// console.log(JSON.stringify(county))



var gcounty={
"type": "FeatureCollection",
"name": "cb_2017_us_county_20m",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
{ "type": "Feature", "properties": { "STATEFP": "06", "COUNTYFP": "075", "COUNTYNS": "00277302", "AFFGEOID": "0500000US06075", "GEOID": "06075", "NAME": "Wahkiakum", "LSAD": "06", "ALAND": 121485107, "AWATER": 479107241 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -122.511983, 37.771129999086256 ], [ -122.465396, 37.800878999086002 ] ] ] } },
{ "type": "Feature", "properties": { "STATEFP": "25", "COUNTYFP": "025", "COUNTYNS": "00606939", "AFFGEOID": "0500000US25025", "GEOID": "25025", "NAME": "Suffolk", "LSAD": "06", "ALAND": 150855462, "AWATER": 160479920 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -122.511983, 37.771129999086256 ], [ -122.465396, 37.800878999086002 ] ] ] } },
{ "type": "Feature", "properties": { "STATEFP": "31", "COUNTYFP": "007", "COUNTYNS": "00835826", "AFFGEOID": "0500000US31007", "GEOID": "31007", "NAME": "Cuming", "LSAD": "06", "ALAND": 1932676697, "AWATER": 397069 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -122.511983, 37.771129999086256 ], [ -122.465396, 37.800878999086002 ] ] ] } }
]
}



// for(var i=0;i<cdata.length;i++){
//     var fullcountyname=cdata[i].County_name
//     var countynamefirst=fullcountyname.split(" ")[0]
//     for(var k=0;k<gcounty.features.length;k++){
//         var cn=gcounty.features[k].properties.NAME
//         if(countynamefirst==cn){
//             gcounty.features[k].properties=collect(cdata[i]);
//         }
//     }  
// }
// console.log(JSON.stringify(gcounty))







// state level
var states={"type":"FeatureCollection","features":[
    {"type":"Feature","id":"01","properties":{"name":"Alabama","density":94.65},"geometry":{"type":"Polygon","coordinates":[[[-87.359296,35.00118],[-85.606675,34.984749],[-85.431413,34.124869]]]}},
    {"type":"Feature","id":"02","properties":{"name":"Alaska","density":1.264},"geometry":{"type":"MultiPolygon","coordinates":[[[[-131.602021,55.117982],[-131.569159,55.28229],[-131.355558,55.183705],[-131.38842,55.01392]]]]}},
    {"type":"Feature","id":"04","properties":{"name":"Arizona","density":57.05},"geometry":{"type":"Polygon","coordinates":[[[-109.042503,37.000263],[-109.04798,31.331629]]]}}
    ]
  }

  
  var gstate=[{
    "State": "Alaska",
    "Broadband access": 87.6,
    "Construction deaths T1": 4.44101945,

  },{
    "State": "Alabama",
    "Broadband access": 65.42,
    "Construction deaths T1": 5.03002049,

  },{
    "State": "Arkansas",
    "Broadband access": 94.83,
    "Construction deaths T1": 4.80544971,

  }
]
  

for(var i=0;i<states.features.length;i++){
    var stname=states.features[i].properties.name
    for(var k=0;k<gstate.length;k++){
        var gs=gstate[k].State
        if(stname==gs){
           states.features[i].properties=collect(gstate[i]);
        }
    }  
}
console.log(JSON.stringify(states))







</script>